plugins {
    id 'java'
    id 'net.serenity-bdd.serenity-gradle-plugin' version '4.0.1'
}

group = 'com.restfulbooker'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation "net.serenity-bdd:serenity-core:4.0.1"
    testImplementation "net.serenity-bdd:serenity-cucumber:4.0.1"
    testImplementation "net.serenity-bdd:serenity-rest-assured:4.0.1"
    testImplementation "net.serenity-bdd:serenity-junit:4.0.1"

    testImplementation "io.cucumber:cucumber-java:7.14.0"
    testImplementation "io.cucumber:cucumber-junit:7.14.0"

    testImplementation "io.rest-assured:rest-assured:5.3.2"
    testImplementation "io.rest-assured:json-path:5.3.2"
    testImplementation "io.rest-assured:json-schema-validator:5.3.2"

    testImplementation "junit:junit:4.13.2"

    testImplementation "org.slf4j:slf4j-simple:2.0.9"

    testImplementation "com.google.code.gson:gson:2.10.1"

    compileOnly("org.projectlombok:lombok:1.18.42")
    annotationProcessor("org.projectlombok:lombok:1.18.42")

    testCompileOnly("org.projectlombok:lombok:1.18.42")
    testAnnotationProcessor("org.projectlombok:lombok:1.18.42")
    compileOnly("com.github.invictum:serenity-reportportal-integration:1.5.7")

}

test {
    testLogging.showStandardStreams = true
    systemProperties System.properties

    jvmArgs(
            "--add-opens", "java.base/java.lang=ALL-UNNAMED",
            "--add-opens", "java.base/java.util=ALL-UNNAMED",
            "--add-opens", "java.base/java.io=ALL-UNNAMED",
            "--add-opens", "java.base/java.lang.reflect=ALL-UNNAMED"
    )
}

gradle.startParameter.continueOnFailure = true

serenity {
    reports = ["single-page-html", "json"]
}
